# Six Sigma Quality Rubric
# Based on the Six Sigma methodology (DMAIC)
#
# Six Sigma Levels:
# - 1 Sigma: 690,000 DPMO (31% yield) - Very poor
# - 2 Sigma: 308,000 DPMO (69% yield) - Poor
# - 3 Sigma: 66,800 DPMO (93.3% yield) - Average
# - 4 Sigma: 6,210 DPMO (99.4% yield) - Good
# - 5 Sigma: 230 DPMO (99.98% yield) - Very Good
# - 6 Sigma: 3.4 DPMO (99.99966% yield) - World Class
#
# DPMO = Defects Per Million Opportunities

name: six-sigma
version: "1.0"
description: "Six Sigma quality metrics for software development"

thresholds:
  target_sigma_level: 4.0
  max_dpmo: 6210
  min_yield_percentage: 99.4
  max_defect_rate: 0.006

rules:
  # Define Phase Metrics
  - id: SIX-001
    name: requirements_coverage
    category: define
    severity: high
    description: "Measure how well requirements are covered by implementation"
    guidance: |
      Requirements coverage metrics:
      - Track requirement-to-test mapping
      - Identify orphan requirements
      - Calculate coverage percentage
      - Target: 100% critical requirements covered
    target_coverage: 1.00

  - id: SIX-002
    name: specification_completeness
    category: define
    severity: medium
    description: "Measure completeness of technical specifications"
    guidance: |
      Specifications should include:
      - Input/output definitions
      - Error handling requirements
      - Performance targets
      - Security requirements
    checklist:
      - "inputs_defined"
      - "outputs_defined"
      - "errors_defined"
      - "performance_defined"
      - "security_defined"

  # Measure Phase Metrics
  - id: SIX-003
    name: defect_density
    category: measure
    severity: high
    description: "Defects per thousand lines of code"
    guidance: |
      Industry benchmarks:
      - 1-25 defects/KLOC typical
      - <1 defect/KLOC excellent
      - Track by module/team
      - Compare to historical baseline
    thresholds:
      excellent: 1.0
      good: 5.0
      acceptable: 10.0
      poor: 25.0

  - id: SIX-004
    name: code_coverage
    category: measure
    severity: high
    description: "Percentage of code covered by tests"
    guidance: |
      Coverage targets:
      - Line coverage: >80%
      - Branch coverage: >70%
      - Critical paths: 100%
      - Integration tests included
    thresholds:
      line_coverage: 0.80
      branch_coverage: 0.70
      critical_path_coverage: 1.00

  - id: SIX-005
    name: mean_time_between_failures
    category: measure
    severity: high
    description: "Average time between production failures"
    guidance: |
      MTBF indicates reliability:
      - Track in production hours
      - Categorize by severity
      - Set improvement targets
      - Compare across releases

  - id: SIX-006
    name: mean_time_to_recovery
    category: measure
    severity: high
    description: "Average time to recover from failures"
    guidance: |
      MTTR indicates resilience:
      - Include detection time
      - Include diagnosis time
      - Include fix deployment time
      - Target: <1 hour for critical

  # Analyze Phase Metrics
  - id: SIX-007
    name: root_cause_categories
    category: analyze
    severity: medium
    description: "Categorize defects by root cause"
    guidance: |
      Common categories:
      - Requirements defects
      - Design defects
      - Coding defects
      - Integration defects
      - Environment defects
    categories:
      - "requirements"
      - "design"
      - "coding"
      - "integration"
      - "environment"
      - "data"
      - "process"

  - id: SIX-008
    name: pareto_analysis
    category: analyze
    severity: medium
    description: "Identify the 20% of causes creating 80% of defects"
    guidance: |
      Focus improvement efforts:
      - Rank defects by frequency
      - Rank by impact
      - Identify patterns
      - Target high-impact areas

  # Improve Phase Metrics
  - id: SIX-009
    name: defect_escape_rate
    category: improve
    severity: high
    description: "Defects found in production vs found in testing"
    guidance: |
      Lower is better:
      - Escaped defects are costly
      - Target: <5% escape rate
      - Analyze escaped defects
      - Improve testing process
    target_escape_rate: 0.05

  - id: SIX-010
    name: first_pass_yield
    category: improve
    severity: medium
    description: "Percentage of work completed correctly the first time"
    guidance: |
      FPY metrics:
      - Code reviews passed first time
      - Tests passed first time
      - Builds succeeded first time
      - Target: >90%
    target_first_pass_yield: 0.90

  - id: SIX-011
    name: rework_percentage
    category: improve
    severity: medium
    description: "Percentage of effort spent on rework"
    guidance: |
      Rework is waste:
      - Track rework hours
      - Categorize by phase
      - Set reduction targets
      - Target: <15% of effort
    target_rework_percentage: 0.15

  # Control Phase Metrics
  - id: SIX-012
    name: process_stability
    category: control
    severity: medium
    description: "Measure process stability over time"
    guidance: |
      Use control charts:
      - Track key metrics over time
      - Identify out-of-control points
      - Set control limits (UCL/LCL)
      - Investigate variations

  - id: SIX-013
    name: technical_debt_ratio
    category: control
    severity: high
    description: "Ratio of remediation cost to development cost"
    guidance: |
      Manage technical debt:
      - Target: <5% debt ratio
      - Track debt over time
      - Prioritize paydown
      - Prevent new debt
    target_debt_ratio: 0.05

  - id: SIX-014
    name: automation_coverage
    category: control
    severity: medium
    description: "Percentage of quality checks automated"
    guidance: |
      Automate for consistency:
      - Unit tests: 100%
      - Integration tests: >80%
      - Code analysis: 100%
      - Deployment: >90%
    targets:
      unit_test_automation: 1.00
      integration_test_automation: 0.80
      code_analysis_automation: 1.00
      deployment_automation: 0.90

  # DPMO Calculation
  - id: SIX-015
    name: dpmo_calculation
    category: metrics
    severity: high
    description: "Calculate Defects Per Million Opportunities"
    guidance: |
      DPMO Formula:
      DPMO = (Defects / Opportunities) * 1,000,000

      For code:
      - Opportunities = lines of code * checks per line
      - Defects = violations found
      - Calculate per analyzer

      Sigma from DPMO:
      - 6 Sigma = 3.4 DPMO
      - 5 Sigma = 230 DPMO
      - 4 Sigma = 6,210 DPMO
      - 3 Sigma = 66,800 DPMO

